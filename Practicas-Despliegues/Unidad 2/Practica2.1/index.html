
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://mydomain.org/mysite/Practicas-Despliegues/Unidad%202/Practica2.1/">
      
      
        <link rel="prev" href="../../..">
      
      
        <link rel="next" href="../Practica2.2/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Práctica 2.1 - Instalación y configuración de un servidor web Nginx - Prácticas Despliegue Aplicaciones web</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="deep-purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#practica-21-instalacion-y-configuracion-de-un-servidor-web-nginx" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Prácticas Despliegue Aplicaciones web" class="md-header__button md-logo" aria-label="Prácticas Despliegue Aplicaciones web" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Prácticas Despliegue Aplicaciones web
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Práctica 2.1 - Instalación y configuración de un servidor web Nginx
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="deep-purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="white"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Prácticas Despliegue Aplicaciones web" class="md-nav__button md-logo" aria-label="Prácticas Despliegue Aplicaciones web" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Prácticas Despliegue Aplicaciones web
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ¡Bienvenido al Repositorio de Prácticas de Despliegue de Aplicaciones Web! 🎉
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Practicas Despliegues
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Practicas Despliegues
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Unidad 2
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Unidad 2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Práctica 2.1 - Instalación y configuración de un servidor web Nginx
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Práctica 2.1 - Instalación y configuración de un servidor web Nginx
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#instalacion-servidor-web-nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación servidor web Nginx
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instalación servidor web Nginx">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creacion-de-la-carpeta-del-sitio-web" class="md-nav__link">
    <span class="md-ellipsis">
      Creación de la carpeta del sitio web
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuracion-de-servidor-web-nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Configuración de servidor web NGINX
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comprobaciones" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobaciones
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Comprobaciones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comprobacion-correcto-funcionamiento" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobación correcto funcionamiento
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comprobar-registros-del-servidor" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobar registros del servidor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ftp" class="md-nav__link">
    <span class="md-ellipsis">
      FTP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FTP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configurar-servidor-sftp-debian" class="md-nav__link">
    <span class="md-ellipsis">
      Configurar Servidor SFTP Debian
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comprobacion-correcto-funcionamiento-ftp" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobación correcto funcionamiento FTP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#https" class="md-nav__link">
    <span class="md-ellipsis">
      HTTPS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HTTPS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuracion-https-para-nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Configuración HTTPS para NGINX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comprobaciones-https" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobaciones HTTPS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Practica2.2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 2.2 – Autenticación en Nginx
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Practica2.3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 2.3 – Proxy inverso con Nginx
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Practica2.4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 2.4 – Balanceo de carga con proxy inverso en Nginx
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Practica2.5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 2.5 - Proxy Inverso y balanceo de carga con SSL en NGINX
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Unidad 3
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Unidad 3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%203/Practica3.1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 3.1: Instalación de Tomcat y despliegue con Maven
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%203/Practica3.2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 3.2: Despliegue de aplicaciones con Node Express y Despliegue de una aplicación React en Netlify (PaaS)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%203/Practica3.3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 3.3: Despliegue de una aplicación Flask (Python)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%203/Practica3.4-Ampliacion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica de Ampliación
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Unidad 4
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Unidad 4
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%204/Practica4.1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 4.1 - Configuración de un servidor DNS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Unidad 5
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Unidad 5
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%205/Practica5.1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 5.1 - Ejercicios de Git y Github
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Unidad 6
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Unidad 6
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%206/Practica6.1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 6.1 - Dockerización del despliegue de una aplicación Node.js
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%206/Practica6.2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 6.2 - Despliegue de una aplicación PHP con Nginx y MySQL usando Docker y docker-compose
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Unidad%206/Practica6.3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Práctica 6.3 - Despliegue de servidores web con usuarios autenticados mediante LDAP usando Docker y docker-compose
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Proyecto Fct
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Proyecto Fct
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Proyecto-Fct/Decripcion-Proyecto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1. Implementación del proyecto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Proyecto-Fct/Endpoints-Api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2. EndPoints Api
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="practica-21-instalacion-y-configuracion-de-un-servidor-web-nginx">Práctica 2.1 - Instalación y configuración de un servidor web Nginx</h1>
<h2 id="instalacion-servidor-web-nginx">Instalación servidor web Nginx</h2>
<p>Para instalar el servidor web Nginx en nuestra máquina primero deberemos actualizar los repositorios.
Tras esto instalaremos nginx con los siguientes comandos:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>update
</span><span id="True-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>Nginx
</span></code></pre></div>
<p>Comprobamos si se ha instalado bien Nginx con el siguiente comando:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>systemctl<span class="w"> </span>status<span class="w"> </span>nginx
</span></code></pre></div>
<p>En la consola debería de salir lo siguiente, si saliera verde y mostrara que está activado entonces nginx está instalado correctamente.</p>
<p><img alt="Imagen consola systemctl" src="../../../assets/images/Practica2.1/systemctl-status-nginx.png" /></p>
<h3 id="creacion-de-la-carpeta-del-sitio-web">Creación de la carpeta del sitio web</h3>
<p>Al igual que en Apache, todos los archivos que formaran parte de una web se organizaran en carpetas.</p>
<p>Estas carpetas, típicamente están dentro de <code>/var/www/</code></p>
<p>Por lo tanto, crearemos la carpeta de nuestro sitio web, en este caso lo llamaremos Practica2-1:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/var/www/nombre_web/html
</span></code></pre></div>
<p>Dentro de la carpeta html que hemos creado clonaremos el siguiente repositorio:</p>
<div class="language-text highlight"><pre><span></span><code><span id="True-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>https://github.com/cloudacademy/static-website-example
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Clonar dirección</p>
<div class="language-text highlight"><pre><span></span><code>Para clonar ese repositorio necesitaras tener instalado git en tu equipo, para esto
usaras el comando ```sudo apt install git``` y posteriormente ```git clone url_repo```
para poder clonar el repositorio
</code></pre></div>
</div>
<p>Además, haremos que el propietario de esta carpeta y todo lo que haya dentro sea el usuario <code>www-data</code> normalmente este es el usuario del servicio web</p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>sudo<span class="w"> </span>chown<span class="w"> </span>-R<span class="w"> </span>www-data:www-data<span class="w"> </span>/var/www/nombre_web/html
</span></code></pre></div>
<p>Y le daremos los permisos adecuados para que no nos dé un error de acceso no autorizado al entrar en el sitio web: </p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>sudo<span class="w"> </span>chmod<span class="w"> </span>-R<span class="w"> </span><span class="m">755</span><span class="w"> </span>/var/www/nombre_web
</span></code></pre></div>
<p>Si hemos seguido bien estos pasos al hacer un <code>ls -l /var/www/nombre_web</code> podremos observar que está bien.</p>
<p><img alt="Imagen permisos y propietarios" src="../../../assets/images/Practica2.1/permisos-y-propietario.png" /></p>
<p>Por último para comprobar que todo está funcionando correctamente nos conectaremos a la web desde nuestro ordenador para esto en el navegador pondremos la siguiente dirección:</p>
<div class="language-text highlight"><pre><span></span><code><span id="True-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>http://ip-máquina-virtual
</span></code></pre></div>
<p>Si hemos conseguido conectarnos el navegador mostrará la página web alojada en el servidor, lo que sería algo asi.</p>
<p><img alt="Imagen conexión a la web desde nuestro ordenador" src="../../../assets/images/Practica2.1/welcome-to-nginx.png" /></p>
<h2 id="configuracion-de-servidor-web-nginx">Configuración de servidor web NGINX</h2>
<p>Tras haber completado los pasos anteriores debemos saber que en NGINX existen 2 rutas importantes. La primera es <code>sites-availabe</code>, la cual contiene
los archivos de configuración de los sitios web que alberga nuestro servidor. La segunda es <code>sites-enabled</code>, la cual se parece a la anterior con la diferencia
de que contiene los archivos de los sitios web que están habilitados, es decir que funcionan en este momento.</p>
<p>Dentro de la carpeta <code>sites-availabe</code> hay un archivo de configuración por defecto llamado default, que es la página que se muestra por defecto al entrar al
servidor sin indicar ningún tipo de sitio web.</p>
<p>Para que NGINX presente el contenido de nuestra web, será necesario crear un bloque de servidor con las directivas correctas. Por lo tánto
crearemos un archivo nuevo en <code>/etc/nginx/sites-availabe/nombre-de-tu-web</code>.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/nginx/sites-availabe/nombre-de-tu-web
</span></code></pre></div>
<p>Y este será el contenido del archivo </p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>server<span class="w"> </span><span class="o">{</span>
</span><span id="True-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">        </span>listen<span class="w"> </span><span class="m">80</span><span class="p">;</span>
</span><span id="True-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">        </span>listen<span class="w"> </span><span class="o">[</span>::<span class="o">]</span>:80<span class="p">;</span>
</span><span id="True-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">        </span>root<span class="w"> </span>/ruta/absoluta/archivo/index<span class="p">;</span>
</span><span id="True-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">        </span>index<span class="w"> </span>index.html<span class="w"> </span>index.htm<span class="w"> </span>index.nginx-debian.html<span class="p">;</span>
</span><span id="True-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">        </span>server_name<span class="w"> </span>nombre_web<span class="p">;</span>
</span><span id="True-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">        </span>location<span class="w"> </span>/<span class="w"> </span><span class="o">{</span>
</span><span id="True-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">                </span>try_files<span class="w"> </span><span class="nv">$uri</span><span class="w"> </span><span class="nv">$uri</span>/<span class="w"> </span><span class="o">=</span><span class="m">404</span><span class="p">;</span>
</span><span id="True-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">        </span><span class="o">}</span>
</span><span id="True-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="o">}</span>
</span></code></pre></div>
<p>La directiva root debe ir seguida de la ruta absoluta dónde se encuentre el archivo index.html de nuestra página web. En mi caso es <code>/var/www/practica2-1/html</code> y
se vería algo asi:</p>
<p><img alt="Imagen nano configuración de sites avialable" src="../../../assets/images/Practica2.1/nano-configuracion-sites-aviable.png" /></p>
<p><img alt="Imagen ls -l de sites-availabe" src="../../../assets/images/Practica2.1/ls-l-sites-availabe.png" /></p>
<p>Por último crearemos un enlace simbólico entre este archivo y la ruta de los sitios que están habilitados.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>sudo<span class="w"> </span>ln<span class="w"> </span>-s<span class="w"> </span>/etc/nginx/sites-available/nombre_web<span class="w"> </span>/etc/nginx/sites-enabled/
</span></code></pre></div>
<p>Tras esto haremos ejecutaremos el comando <code>ls -l /etc/nginx/sites-enabled/</code> y nos deberá salir el enlace simbólico.</p>
<p><img alt="Imagen ls -l de sites enabled" src="../../../assets/images/Practica2.1/ls-l-sites-enabled.png" /></p>
<p>Por último reiniciaremos el servidor para que se aplique la configuración</p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>nginx
</span></code></pre></div>
<h2 id="comprobaciones">Comprobaciones</h2>
<h3 id="comprobacion-correcto-funcionamiento">Comprobación correcto funcionamiento</h3>
<p>Como no contamos con un servidor DNS para que nos traduzca las ips, deberemos hacerlo manualmente. Por lo tánto
editaremos el archivo <code>/etc/hosts</code> de nuestro ordenador para que la IP quede asociada a la máquina virtual, nuestra directriz <code>server_name</code>.</p>
<p>En mi caso al usar Linux el archivo se encuentra en <code>/etc/hosts</code>, aunque si el sistema operativo fuese windows no habría problema,
ya que la ruta del archivo en ese caso es <code>C:\Windows\System32\drivers\etc\hosts</code></p>
<p>Al archivo le añadiremos la siguiente línea:</p>
<div class="language-text highlight"><pre><span></span><code><span id="True-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>IP_SERVIDOR nombre_web
</span></code></pre></div>
<p>Tras haberla añadido debería verse algo así:</p>
<p><img alt="Imagen tras la edición de /etc/hosts" src="../../../assets/images/Practica2.1/edicion-etc-hosts.png" /></p>
<p>Si hemos seguido todos estos pasos y no se ha producido un error, al introducir <code>http://practica2-1</code> en el navegador de nuestra
máquina anfitriona este nos mostrara la página web alojada en nuestro servidor.</p>
<p><img alt="Imagen contenido de la web" src="../../../assets/images/Practica2.1/index-de-web-desde-anfitrion.png" /></p>
<h3 id="comprobar-registros-del-servidor">Comprobar registros del servidor</h3>
<p>Comprobad que las peticiones se están registrando correctamente en los archivos de logs, tanto las correctas como las erróneas:</p>
<ul>
<li><code>/var/log/nginx/acces.log</code>: Cada solicitud al servidor web se registra en este archivo. A no ser que Nginx este configurado para hacer algo diferente.</li>
<li><code>/var/log/nginx/error.log</code>: Aquí queda registrado cada error de Nginx.</li>
</ul>
<p>Y como podemos observar en acces.log ya han quedado registradas las solicitudas para conectarnos</p>
<p><img alt="Imagen acces.log" src="../../../assets/images/Practica2.1/access-log.png" /></p>
<h2 id="ftp">FTP</h2>
<p>El FTP es un protocolo de transferencias de archivos entre sistemas. Como su nombre indica File Transfer Protocol(FTP) es un protocolo
que permite la transferencia de archivos directamente entre 2 sistemas. Últimamente, es un protocolo que se encuentra en desuso.</p>
<p>El protocolo FTP en sí es un protocolo inseguro, pues su información no viaja cifrada. Sin embargo, esto se solucionó en 2001,
con el protocolo SFTP, que le añade una capa de SSH para hacerlo más seguro y privado. Por lo tánto SFTP es lo mismo que FTP pero
implementando un canal seguro.</p>
<h3 id="configurar-servidor-sftp-debian">Configurar Servidor SFTP Debian</h3>
<p>En primer lugar instaláremos con los siguientes comandos:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
</span><span id="True-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>vsftpd
</span></code></pre></div>
<p>Tras instalarlo crearemos una carpeta en la siguiente ruta <code>/home/usuario/ftp</code> con el siguiente comando:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>mkdir<span class="w"> </span>/home/nombre_usuario/ftp
</span></code></pre></div>
<p>Ahora crearemos los certificados de seguridad necesarios para aportar la capa de seguridad a nuestra conexión</p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>sudo<span class="w"> </span>openssl<span class="w"> </span>req<span class="w"> </span>-x509<span class="w"> </span>-nodes<span class="w"> </span>-days<span class="w"> </span><span class="m">365</span><span class="w"> </span>-newkey<span class="w"> </span>rsa:2048<span class="w"> </span>-keyout<span class="w"> </span>/etc/ssl/private/vsftpd.pem<span class="w"> </span>-out<span class="w"> </span>/etc/ssl/private/vsftpd.pem
</span></code></pre></div>
<p>Tras introducir este comando nos saldrá algo asi:</p>
<p><img alt="Imagen creación claves SSL" src="../../../assets/images/Practica2.1/creacion-claves-ssl.png" /></p>
<p>Una vez realizados estos pasos, procederemos a realizar la configuración de VSFTPD. Es muy simple y solamente
necesitaremos editar el archivo de configuración del servicio.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/vsftpd.conf
</span></code></pre></div>
<p>En primer lúgar buscaremos las siguientes líneas y las borraremos.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="nv">rsa_cert_file</span><span class="o">=</span>/etc/ssl/certs/ssl-cert-snakeoil.pem
</span><span id="True-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="nv">rsa_private_key_file</span><span class="o">=</span>/etc/ssl/private/ssl-cert-snakeoil.key
</span><span id="True-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="nv">ssl_enable</span><span class="o">=</span>NO
</span></code></pre></div>
<p>Tras esto añadiremos las siguientes en su lugar:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nv">rsa_cert_file</span><span class="o">=</span>/etc/ssl/private/vsftpd.pem
</span><span id="True-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="nv">rsa_private_key_file</span><span class="o">=</span>/etc/ssl/private/vsftpd.pem
</span><span id="True-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="nv">ssl_enable</span><span class="o">=</span>YES
</span><span id="True-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="nv">allow_anon_ssl</span><span class="o">=</span>NO
</span><span id="True-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="nv">force_local_data_ssl</span><span class="o">=</span>YES
</span><span id="True-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="nv">force_local_logins_ssl</span><span class="o">=</span>YES
</span><span id="True-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="nv">ssl_tlsv1</span><span class="o">=</span>YES
</span><span id="True-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="nv">ssl_sslv2</span><span class="o">=</span>NO
</span><span id="True-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="nv">ssl_sslv3</span><span class="o">=</span>NO
</span><span id="True-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="nv">require_ssl_reuse</span><span class="o">=</span>NO
</span><span id="True-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="nv">ssl_ciphers</span><span class="o">=</span>HIGH
</span><span id="True-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>
</span><span id="True-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span class="nv">local_root</span><span class="o">=</span>/home/nombre_usuario/ftp
</span></code></pre></div>
<p>Siendo local_root la ruta absoluta a la carpeta que creamos anteriormente en nuestro usuario, se vería algo asi:</p>
<p><img alt="Imagen configuración vsftpd.conf" src="../../../assets/images/Practica2.1/vsftpd-conf.png" /></p>
<p>Tras guardar los cambios reiniciaremos el servicio para que se apliquen.</p>
<div class="language-text highlight"><pre><span></span><code><span id="True-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>sudo systemctl restart --now vsftpd
</span></code></pre></div>
<p>Por último realizaremos un <strong>status</strong> para comprobar que el servicio está funcionando correctamente</p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>vsftpd
</span></code></pre></div>
<p>Y tendría que salir algo así:</p>
<p><img alt="Imagen status vsftpd" src="../../../assets/images/Practica2.1/status-vsftpd.png" /></p>
<h3 id="comprobacion-correcto-funcionamiento-ftp">Comprobación correcto funcionamiento FTP</h3>
<p>Tras haber completado todos estos pasos ya podemos conectarnos al servidor mediante FTP mediante un cliente adecuado.
En este caso usaremos Filezilla, la cual es una aplicación FTP libre y de código abierto.</p>
<p>La conexión se puede realizar de dos formas:</p>
<ul>
<li>
<p>Mediante el puerto por defecto del protocolo <strong><em>inseguro</em></strong> FTP, el 21, pero utilizando certificados que cifran el intercambio de datos convirtiéndolo así en <strong><em>seguro</em></strong></p>
</li>
<li>
<p>Haciendo uso del protocolo SFTP, dedicado al intercambio de datos mediante una conexión similar a SSH, utilizando de hecho el puerto 22.</p>
</li>
</ul>
<p>Para esto abriremos Filezilla e introduciremos los datos necesarios para realizar la conexión.</p>
<p><img alt="Imagen Filezilla datos" src="../../../assets/images/Practica2.1/filezilla-datos.png" /></p>
<ul>
<li>La IP de nuestra máquina virtual en el apartado de servidor.</li>
<li>El nombre de usuario de nuestra máquina virtual en el apartado Nombre de usuario.</li>
<li>La contraseña de ese usuario en el apartado contraseña.</li>
<li>El puerto de conexión, que será el 21 para conectarnos utilizando los certificados generados previamente en el apartado puerto.</li>
</ul>
<p>Durante la conexión filezilla nos avisará de que el certificado es desconocido, le daremos a aceptar, ya que no es peligro pués lo hemos generado nosotros mismos:</p>
<p><img alt="Imagen Certificado Filezilla" src="../../../assets/images/Practica2.1/certificado-desconocido.png" /></p>
<p>Tras haber establecido la conexión nos conectaremos automáticamente a la carpeta <code>/home/acoronado/ftp</code> de la máquina virtual</p>
<p>Si lo que quisiéramos conectarnos por <strong>SFTP</strong> sería el mismo proceso, solo que el puerto sería el puerto 22</p>
<p>Al conectarnos Filezilla nos también nos avisará sobre la clave desconocida, le daremos aceptar y ya tendremos acceso al servidor mediante <strong>SFTP</strong></p>
<p><img alt="Imagen clave Filezilla" src="../../../assets/images/Practica2.1/clave-desconocida.png" /></p>
<p>Posteriorménte buscamos la carpeta de nuestro ordenador donde hemos creado un archivo .txt de prueba(en la parte izquierda de la pantalla) y en la parte derecha de la pantalla, buscaremos la carpeta donde queremos subirla. Con un doble clic o arrastrando el archivo hacia la derecha, subiremos una copia al servidor.</p>
<p><img alt="Imagen subida archivo prueba" src="../../../assets/images/Practica2.1/subida-archivo-prueba.png" /></p>
<p>Y como podemos ver al hacer un <code>ls -l /home/acoronado/ftp</code> podemos ver que el archivo está en la máquina virtual</p>
<p><img alt="Imagen ls -l ftp" src="../../../assets/images/Practica2.1/ls-l-ftp-archivo-prueba.png" /></p>
<h2 id="https">HTTPS</h2>
<h3 id="configuracion-https-para-nginx">Configuración HTTPS para NGINX</h3>
<p>En este apartado le añadiremos a nuestro servidor una capa de seguridad necesaria. Haremos que todos nuestros sitios web alojados hagan uso de certificados SSL y se acceda a ellos por medio de HTTPS.</p>
<p>Para esto primero tendremos que generar un clave SSL con el siguiente comando, esta opción solo es válida si solo necesitas cifrado sin preocuparte por las advertencias de los navegadores sobre la validez del certificado:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>mkdir<span class="w"> </span>/etc/nginx/ssl
</span><span id="True-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>sudo<span class="w"> </span>openssl<span class="w"> </span>req<span class="w"> </span>-x509<span class="w"> </span>-nodes<span class="w"> </span>-days<span class="w"> </span><span class="m">365</span><span class="w"> </span>-newkey<span class="w"> </span>rsa:2048<span class="w"> </span>-keyout<span class="w"> </span>/etc/nginx/ssl/tu_dominio.key<span class="w"> </span>-out<span class="w"> </span>/etc/nginx/ssl/tu_dominio.crt
</span></code></pre></div>
<p>Y se verá así tras generar la clave:</p>
<p><img alt="Generación clave HTTPS" src="../../../assets/images/Practica2.1/clave-https.png" /></p>
<p>Tras esto deberemos ir al archivo de configuración de nuestro sitio ubicado en <code>/etc/nginx/sites-availabe/practica2-1</code> donde cambiaremos algunos bloques
para que se use el protocolo HTTPS.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/nginx/sites-available/practica2-1
</span></code></pre></div>
<p>En donde añadiremos el siguiente bloque <strong>server</strong></p>
<div class="language-nginx highlight"><pre><span></span><code><span id="True-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="k">server</span><span class="w"> </span><span class="p">{</span>
</span><span id="True-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="mi">443</span><span class="w"> </span><span class="s">ssl</span><span class="p">;</span>
</span><span id="True-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">    </span><span class="kn">server_name</span><span class="w"> </span><span class="s">tu_dominio.com</span><span class="w"> </span><span class="s">www.tu_dominio.com</span><span class="p">;</span>
</span><span id="True-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>
</span><span id="True-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">    </span><span class="kn">ssl_certificate</span><span class="w"> </span><span class="s">/etc/nginx/ssl/tu_dominio.crt</span><span class="p">;</span>
</span><span id="True-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">    </span><span class="kn">ssl_certificate_key</span><span class="w"> </span><span class="s">/etc/nginx/ssl/tu_dominio.key</span><span class="p">;</span>
</span><span id="True-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>
</span><span id="True-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="w">    </span><span class="kn">ssl_protocols</span><span class="w"> </span><span class="s">TLSv1.2</span><span class="w"> </span><span class="s">TLSv1.3</span><span class="p">;</span>
</span><span id="True-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="w">    </span><span class="kn">ssl_ciphers</span><span class="w"> </span><span class="s">&#39;ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384&#39;</span><span class="p">;</span>
</span><span id="True-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="w">    </span><span class="kn">ssl_prefer_server_ciphers</span><span class="w"> </span><span class="no">on</span><span class="p">;</span>
</span><span id="True-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="w">    </span><span class="kn">ssl_session_cache</span><span class="w"> </span><span class="s">shared:SSL:10m</span><span class="p">;</span>
</span><span id="True-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a>
</span><span id="True-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="w">    </span><span class="c1"># Resto de configuración del servidor, como root, index, location blocks...</span>
</span><span id="True-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="w">    </span><span class="kn">root</span><span class="w"> </span><span class="s">/var/www/tu_dominio.com/html</span><span class="p">;</span>
</span><span id="True-22-15"><a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a><span class="w">    </span><span class="kn">index</span><span class="w"> </span><span class="s">index.html</span><span class="w"> </span><span class="s">index.htm</span><span class="p">;</span>
</span><span id="True-22-16"><a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a>
</span><span id="True-22-17"><a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a><span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="s">/</span><span class="w"> </span><span class="p">{</span>
</span><span id="True-22-18"><a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a><span class="w">        </span><span class="kn">try_files</span><span class="w"> </span><span class="nv">$uri</span><span class="w"> </span><span class="nv">$uri/</span><span class="w"> </span><span class="p">=</span><span class="mi">404</span><span class="p">;</span>
</span><span id="True-22-19"><a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a><span class="w">    </span><span class="p">}</span>
</span><span id="True-22-20"><a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a><span class="p">}</span>
</span></code></pre></div>
<p>Si queremos forzar que todas las peticiones http se redirijan a https deberemos añadir el siguiente bloque <strong>server</strong></p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>server<span class="w"> </span><span class="o">{</span>
</span><span id="True-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="w">    </span>listen<span class="w"> </span><span class="m">80</span><span class="p">;</span>
</span><span id="True-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="w">    </span>server_name<span class="w"> </span>tu_dominio.com<span class="w"> </span>www.tu_dominio.com<span class="p">;</span>
</span><span id="True-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>
</span><span id="True-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="m">301</span><span class="w"> </span>https://<span class="nv">$host$request_uri</span><span class="p">;</span>
</span><span id="True-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="o">}</span>
</span></code></pre></div>
<p>Tras esto reiniciaremos nginx con:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>nginx
</span></code></pre></div>
<p>Y revisaremos su estado:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="True-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>nginx
</span></code></pre></div>
<p>Debería aparecernos así:</p>
<p><img alt="Imagen estado post config https" src="../../../assets/images/Practica2.1/estado-nginx-post-https.png" /></p>
<h3 id="comprobaciones-https">Comprobaciones HTTPS</h3>
<p>Por último comprobaremos que podemos conectarnos desde nuestra maquina anfitriona para esto en el navegador pondremos <code>https://practica2-1</code></p>
<p>Al intentar acceder firefox nos avisará de que el certificado de seguridad no es válido, y que se trata de una clave autofirmada. Pero como lo
hemos generado nosotros no hay problema solo deberemos darle ha avanzado y continuar.</p>
<p><img alt="Imagen advertencia firefox" src="../../../assets/images/Practica2.1/advertencia-firefox.png" /></p>
<p>Tras esto nos mostrara la pagina:</p>
<p><img alt="Imagen de la pagina en HTTPS" src="../../../assets/images/Practica2.1/web-desde-https.png" /></p>
<p>Para finalizar introduciremos en el navegador <code>http://practica2-1</code> para comprobar que el servidor nos redirige a HTTPS. Si todo está bien, nos mostrará
el mismo aviso anterior y nos redirija a la página usando el protocolo <strong><em>https</em></strong></p>
<hr />
<p><strong>Alumno: Coronado Ortega, Alejandro</strong></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../.." class="md-footer__link md-footer__link--prev" aria-label="Previous: ¡Bienvenido al Repositorio de Prácticas de Despliegue de Aplicaciones Web! 🎉">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                ¡Bienvenido al Repositorio de Prácticas de Despliegue de Aplicaciones Web! 🎉
              </div>
            </div>
          </a>
        
        
          
          <a href="../Practica2.2/" class="md-footer__link md-footer__link--next" aria-label="Next: Práctica 2.2 – Autenticación en Nginx">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Práctica 2.2 – Autenticación en Nginx
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Alexcoro13/Alexcoro13.github.io" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["toc.integrate", "navigation.footer", "content.code.copy", "palette:toggle"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>